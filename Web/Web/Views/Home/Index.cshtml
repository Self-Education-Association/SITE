@model Web.Models.HomeIndexViewModel
@{
    ViewBag.Title = "首页";
}
<!--第一部分：大标题-->
<section class="sec">
    <div class="row animated fadeIn" style="z-index:0;">
        <b class="secheader">京贸创客 | E-Trunker </b>
        <p class="seccontent">
            京贸创客创业平台是对外经济贸易大学国际经济贸易学院与北京其他兄弟院校共建的创业平台。在这里你能找到自己的创业伙伴，获得导师指导，注册并成立自己的创业公司。
        </p>
    </div>
</section>
<!--第二部分：轮播图-->
<section class="secblank">
    <div class="row" style="padding-left:10%;padding-right:10%;">
        <div style="float:left" class="col-md-4 col-xs-12">
            <h1 class="showtitle" style="font-size:40px;">风采展示|Show</h1>
            <p class="showpara">这里是京贸创客风采展示。</p>
        </div>
        <div style="margin-top:20px;" class="col-md-8 col-xs-12">
            <div id="myCarousel" class="carousel slide" style="height:300px;cursor:pointer;box-shadow:20px 20px 20px rgba(0,0,0,0.5);" data-ride="carousel" data-interval="2000">
                @if (Model.Sliders.Count > 0)
                {

                <!-- 轮播（Carousel）指标 -->
                    <ol class="carousel-indicators">
                        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                        @for (int i = 1; i < Model.Sliders.Count; i++)
                        {
                            <li data-target="#myCarousel" data-slide-to="@i"></li>
                        }
                    </ol>
                <!-- 轮播（Carousel）项目 -->
                    <div class="carousel-inner">
                        <div class="item active">
                            <img src="@Url.Content(Model.Sliders[0].GetUrl())" alt="First slide" style="height:300px;width:100%">
                            <div class="carousel-caption">@Model.Sliders[0].Description</div>
                        </div>
                        @for (int i = 1; i < Model.Sliders.Count; i++)
                        {
                            <div class="item">
                                <img src="@Url.Content(Model.Sliders[i].GetUrl())" alt="First slide" style="height:300px;width:100%">
                                <div class="carousel-caption">@Model.Sliders[i].Description</div>
                            </div>
                        }
                    </div>
                <!-- 轮播（Carousel）导航 -->
                    <a class="left carousel-control" data-slide="prev" href="#myCarousel" style="color:springgreen">&lsaquo;</a>
                    <a class="right carousel-control" data-slide="next" href="#myCarousel" style="color:springgreen">&rsaquo;</a>

                }
            </div>
        </div>
    </div>
</section>
<!--第三部分：公告栏-->
<section class="secblank" style="background-image:url(../../img/featuresbg.jpg);background-size: cover;background-position: center;background-attachment:fixed;">
    <div class="row" style="padding-left:10%;padding-right:10%;">
        <b class="secheader col-xs-12">近期活动|Recent</b>
        @foreach (Web.Models.ActivityOperation a in Model.LatestActivitys)
        {
            <div class="col-md-4 col-xs-6">
                <div class="feature">
                    <img src="~/img/timelane1.jpg" alt="Compas">
                    <h3 style="margin-top: 25px; margin-bottom: 5px; font-size: 18px;min-height:32px;font-family:SimHei">@a.Name</h3>
                    <p style="font-size: 16px;line-height: 1.6;  margin: 0 0 10px;text-wrap:normal;min-height:75px;">@a.ShortContent</p>
                    <a class="btn btn-primary btn-large btn-block imgbtn" href="~/Activity/Details/@a.Id" style="background-color:rgb(0,161,196);">阅读详细</a>
                </div>
            </div>
        }
    </div>
</section>
<!--第四部分：团队故事-->
<section class="secblank">
    <div class="row" style="padding-left:10%;padding-right:10%;text-align:center;">
        <div class="col-xs-12 secheader" style="color:black;">团队故事|Story</div>
        <div class="col-md-3 col-xs-6 showitem">
            <img class="img-responsive" src="~/img/story1.png" alt="">
        </div>
        <div class="col-md-3 col-xs-6 showitem">
            <img class="img-responsive" src="~/img/story1.jpg" alt="">
            <div class="storycover"><div class="storya">了解团队</div></div>
        </div>
        <div class="col-md-3 col-xs-6 showitem">
            <img class="img-responsive" src="/img/story1.png" alt="">
        </div>
        <div class="col-md-3 col-xs-6 showitem">
            <img class="img-responsive" src="~/img/story4.jpg" alt="">
            <div class="storycover"><div class="storya">了解团队</div></div>
        </div>
        <div class="col-md-3 col-xs-6 showitem">
            <img class="img-responsive" src="~/img/story2.jpg" alt="">
            <div class="storycover"><div class="storya">了解团队</div></div>
        </div>
        <div class="col-md-3 col-xs-6 showitem">
            <img class="img-responsive" src="/img/story3.png" alt="">
        </div>
        <div class="col-md-3 col-xs-6 showitem">
            <img class="img-responsive" src="~/img/story3.jpg" alt="">
            <div class="storycover"><div class="storya">了解团队</div></div>
        </div>
        <div class="col-md-3 col-xs-6 showitem">
            <img class="img-responsive" src="~/img/story3.png" alt="">
        </div>
    </div>

</section>
<!--第五部分：日历-->
<section class="secblank" style="background:url(../../img/calenderbg.jpg) center;padding:100px 0;">
    <div class="row" style="padding-left:10%;padding-right:10%;">
        <div class="col-xs-12">
            <div class="col-md-6 col-xs-6">
                <h1 class="showtitle" style="font-size:30px;color:white;font-family:'Microsoft YaHei UI'">日历|Calendar</h1>
                <ul id="activityByMonth">
                    @Html.Action("ActivitiesByMonth", new { year = DateTime.Now.Year, month = DateTime.Now.Month });
                </ul>
            </div>
            <div class="col-md-6 col-xs-6">
                <div class="Calendar">
                    <div id="idCalendarPre">&lt;&lt;</div>
                    <div id="idCalendarNext">&gt;&gt;</div>
                    <span id="idCalendarYear"></span>年 <span id="idCalendarMonth"></span>月
                    <table cellspacing="0">
                        <thead>
                            <tr>
                                <td>日</td>
                                <td>一</td>
                                <td>二</td>
                                <td>三</td>
                                <td>四</td>
                                <td>五</td>
                                <td>六</td>
                            </tr>
                        </thead>
                        <tbody id="idCalendar"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>
<!--上面是日历-->
<script>
    $("#myCarousel").hover(function () {
        $("#myCarousel").css({ "box-shadow": "20px 20px 20px rgba(0,0,0,0.5)" });
    }, function () {
        $("#myCarousel").css({ "box-shadow": "10px 10px 20px rgba(0,0,0,0.5)" });
    });
</script>
<script type="text/javascript">
    var $ = function (id) {
        return "string" == typeof id ? document.getElementById(id) : id;
    };

    var Class = {
        create: function () {
            return function () {
                this.initialize.apply(this, arguments);
            }
        }
    }

    var Extend = function (destination, source) {
        for (var property in source) {
            destination[property] = source[property];
        }
        return destination;
    }


    var Calendar = Class.create();
    Calendar.prototype = {
        initialize: function (container, options) {
            this.Container = $(container);//容器(table结构)
            this.Days = [];//日期对象列表

            this.SetOptions(options);

            this.Year = this.options.Year || new Date().getFullYear();
            this.Month = this.options.Month || new Date().getMonth() + 1;
            this.SelectDay = this.options.SelectDay ? new Date(this.options.SelectDay) : null;
            this.onSelectDay = this.options.onSelectDay;
            this.onToday = this.options.onToday;
            this.onFinish = this.options.onFinish;

            this.Draw();
        },
        //设置默认属性
        SetOptions: function (options) {
            this.options = {//默认值
                Year: 0,//显示年
                Month: 0,//显示月
                SelectDay: null,//选择日期
                onSelectDay: function () { },//在选择日期触发
                onToday: function () { },//在当天日期触发
                onFinish: function () { }//日历画完后触发
            };
            Extend(this.options, options || {});
        },
        //当前月
        NowMonth: function () {
            this.PreDraw(new Date());
        },
        //上一月
        PreMonth: function () {
            var request = this.Month - 1;
            jQuery.ajax({
                type: "GET",
                url: '@Url.Action("ActivitiesByMonth")' + '?year=' + this.Year + '&month=' +request,
                data: {},
                datatype: "json",
                success: function (data) {
                    document.getElementById('activityByMonth').innerHTML = data;
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            })
            this.PreDraw(new Date(this.Year, this.Month - 2, 1));
        },
        //下一月
        NextMonth: function () {
            var request = this.Month + 1;
            jQuery.ajax({
                type: "GET",
                url: '@Url.Action("ActivitiesByMonth")' + '?year=' + this.Year + '&month=' + request,
                data: {},
                datatype: "json",
                success: function (data) {
                    document.getElementById('activityByMonth').innerHTML = data;
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            })
            this.PreDraw(new Date(this.Year, this.Month, 1));
        },
        //上一年
        PreYear: function () {
            this.PreDraw(new Date(this.Year - 1, this.Month - 1, 1));
        },
        //下一年
        NextYear: function () {
            this.PreDraw(new Date(this.Year + 1, this.Month - 1, 1));
        },
        //根据日期画日历
        PreDraw: function (date) {
            //再设置属性
            this.Year = date.getFullYear(); this.Month = date.getMonth() + 1;
            //重新画日历
            this.Draw();
        },
        //画日历
        Draw: function () {
            //用来保存日期列表
            var arr = [];
            //用当月第一天在一周中的日期值作为当月离第一天的天数
            for (var i = 1, firstDay = new Date(this.Year, this.Month - 1, 1).getDay() ; i <= firstDay; i++) { arr.push(0); }
            //用当月最后一天在一个月中的日期值作为当月的天数
            for (var i = 1, monthDay = new Date(this.Year, this.Month, 0).getDate() ; i <= monthDay; i++) { arr.push(i); }
            //清空原来的日期对象列表
            this.Days = [];
            //插入日期
            var frag = document.createDocumentFragment();
            while (arr.length) {
                //每个星期插入一个tr
                var row = document.createElement("tr");
                //每个星期有7天
                for (var i = 1; i <= 7; i++) {
                    var cell = document.createElement("td"); cell.innerHTML = "&nbsp;";
                    if (arr.length) {
                        var d = arr.shift();
                        if (d) {
                            cell.innerHTML = d;
                            this.Days[d] = cell;
                            var on = new Date(this.Year, this.Month - 1, d);
                            //判断是否今日
                            this.IsSame(on, new Date()) && this.onToday(cell);
                            //判断是否选择日期
                            this.SelectDay && this.IsSame(on, this.SelectDay) && this.onSelectDay(cell);
                        }
                    }
                    row.appendChild(cell);
                }
                frag.appendChild(row);
            }
            //先清空内容再插入(ie的table不能用innerHTML)
            while (this.Container.hasChildNodes()) { this.Container.removeChild(this.Container.firstChild); }
            this.Container.appendChild(frag);
            //附加程序
            this.onFinish();
        },
        //判断是否同一日
        IsSame: function (d1, d2) {
            return (d1.getFullYear() == d2.getFullYear() && d1.getMonth() == d2.getMonth() && d1.getDate() == d2.getDate());
        }
    }
</script>
<script language="JavaScript">
    var cale = new Calendar("idCalendar", {
        SelectDay: new Date().setDate(10),
        onSelectDay: function (o) { o.className = "onSelect"; },
        onToday: function (o) { o.className = "onToday"; },
        onFinish: function () {
            $("idCalendarYear").innerHTML = this.Year; $("idCalendarMonth").innerHTML = this.Month;
            var flag = [];
            for (var i = 0, len = flag.length; i < len; i++) {
                this.Days[flag[i]].innerHTML = "<a href='javascript:void(0);' onclick=\"alert('日期是:" + this.Year + "/" + this.Month + "/" + flag[i] + "');return false;\">" + flag[i] + "</a>";
            }
        }
    });

    $("idCalendarPre").onclick = function () { cale.PreMonth(); }
    $("idCalendarNext").onclick = function () { cale.NextMonth(); }

    $("idCalendarPreYear").onclick = function () { cale.PreYear(); }
    $("idCalendarNextYear").onclick = function () { cale.NextYear(); }

    $("idCalendarNow").onclick = function () { cale.NowMonth(); }

</script>

